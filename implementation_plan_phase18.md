# 18단계 Implementation Plan: 일정 중심 캘린더 직접 등록 (Schedule-First Calendar Integration)

> **최종 작성일**: 2026-02-24  
> **목표**: 업무(Task) 마감일 동기화와 별개로, 회의/미팅/외근 등 시간 기반 일정을 슬랙에서 직접 구글 캘린더에 등록하는 독립 기능 구축  
> **기존 4단계와의 차이**: 4단계는 "Tasks 시트 마감일 → 종일 이벤트 자동 반영"이며, 본 단계는 "사용자가 직접 시간/장소 지정 → 시간 이벤트 등록"

---

## 1. 기존 기능(4단계)과의 명확한 역할 분리

| 구분 | 4단계 (기존) | 18단계 (신규) |
|---|---|---|
| **트리거** | Tasks 시트 편집 시 자동 | 사용자가 슬랙에서 직접 등록 |
| **이벤트 유형** | 종일(All Day) | 시간 지정 (시작~종료) |
| **데이터 원천** | 업무 마감일 | 일정 정보 (유형, 시간, 장소, 참석자) |
| **용도** | 업무 리마인더 | 회의/미팅/외근 일정 관리 |
| **GAS 함수** | `syncCalendarEvent()` | `createScheduleEvent()` (신규) |

---

## 2. 상세 구현 프로세스 (4단계)

### Step 1. 슬랙 일정 등록 인터페이스 (`slack_command.gs` 확장)
- **명령어**: `/주디 일정` 입력 시 일정 등록 전용 모달 팝업.
- **모달 필드**:
  - 일정 유형: 회의 / 미팅 / 외근 / 교육 / 기타 (드롭다운)
  - 일정 제목: 자유 입력
  - 날짜: 날짜 선택기
  - 시작 시간 ~ 종료 시간: 시간 선택기
  - 장소: 자유 입력 (선택)
  - 상세 내용: 자유 입력 (선택)
  - 관련 프로젝트: Projects 시트 연동 드롭다운 (선택, 16단계 연동)

### Step 2. 캘린더 등록 백엔드 (`calendar_schedule.gs` 신규)
- **핵심**: `CalendarApp.createEvent(제목, 시작시간, 종료시간, {location, description})` 활용.
- 기존 `calendar_sync.gs`의 종일 이벤트(`createAllDayEvent`)와 완전 분리된 별도 파일.
- 이벤트 제목 형식: `[유형] 제목` (예: `[회의] 마케팅 주간 미팅`)
- 이벤트 설명에 등록자, 프로젝트, 상세 내용 자동 포함.

### Step 3. 일정 데이터 시트 관리 (`Schedules` 시트 신설)
- Tasks 시트와 분리된 독립 시트로 일정 이력 관리.
- 컬럼: 일정ID, 유형, 제목, 날짜, 시작시간, 종료시간, 장소, 등록자, 프로젝트, 캘린더이벤트ID
- AI 리포트 시 Tasks + Schedules를 교차 분석하여 "이번 주 회의 3건, 외근 1건" 등 종합 브리핑 가능.

### Step 4. 슬랙 알림 및 리마인더 연동
- 일정 등록 완료 시 등록자에게 확인 DM 발송.
- 일정 시작 30분 전 슬랙 리마인더 자동 발송 (GAS 트리거 활용).
- 17단계 역할 뷰와 연동: 팀장이 `/주디 팀 일정`으로 팀원 일정 확인 가능.

---

## 3. 검증 시나리오 (Verification Plan)

1. `/주디 일정` 입력 시 시간 선택이 포함된 모달이 정상 표시되는가?
2. 모달 제출 후 구글 캘린더에 **시간 지정 이벤트**(종일 이벤트가 아닌)가 생성되는가?
3. `Schedules` 시트에 해당 일정 데이터가 정확히 기록되는가?
4. 기존 4단계의 업무 마감일 종일 이벤트와 충돌 없이 공존하는가?
