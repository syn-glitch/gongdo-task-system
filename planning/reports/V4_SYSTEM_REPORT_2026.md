# 📄 [Report] V4 핑퐁 시스템 통합 현황 및 향후 로드맵

---
**문서 정보**
- **작성자**: 꼼꼼이 문서팀장 박DC
- **작성일**: 2026-02-28
- **상태**: Phase 1 완료 및 Phase 2 준비 중
---

## 1. 시스템 구성 요소별 목적 및 개요

본 시스템은 **"비전문가의 언어를 실행 가능한 데이터로 전환"**하고, 이를 **"AI 에이전트 간 협업으로 완수"**하는 것을 목표로 합니다.

| 구성 요소 | 주요 역할 (Purpose) | 개요 (Overview) |
| :--- | :--- | :--- |
| **WOW-GATEWay (챗봇)** | **수요 접수 및 정제** | 비전공자 팀원이 일상 언어로 아이디어를 던지면, 인터뷰를 통해 'Task Package'를 자동 추출하는 관문 |
| **AgenticFlow (칸반)** | **실시간 관제 및 제어** | 각 에이전트(Bunker, Jarvis, Kim QA 등)의 작업 상태를 시각화하고 핑퐁(반려/합격) 현황을 모니터링하는 대시보드 |
| **Google Sheets (DB)** | **데이터 영속성 및 SSOT** | 모든 태스크의 상태, 담당자, 핑퐁 횟수, 토큰 사용량 등을 기록하는 시스템의 심장이자 단일 진실 공급원(SSOT) |

---

## 2. 현재까지 완료된 내용 (Current Progress)

### ✅ 인프라 및 파이프라인 구축
- **V4 하네스 웹훅 연동**: Google Apps Script(`agent_sync.gs`)를 통한 실시간 데이터 수신 환경 구축
- **데이터 자동 동기화**: 대시보드(Frontend) ↔ 시트(DB) ↔ 웹훅(API) 간의 10초 주기 자동 갱신 로직 구현

### ✅ WOW-GATEWay 챗봇 고도화
- **UI/UX 최적화**: 말풍선 레이아웃 수정 및 한글 IME 입력 오류(끝글자 중복) 완벽 차단
- **보안 및 방어 로직**: 
  - 최대 7턴 이내 대화 제한 (무한 루프 방지)
  - 1시간 뒤 세션 자동 만료 (좀비 세션 GC)
  - 입력값 검증 (최대 500자 제한 및 XSS 방지)

### ✅ 통합 시각화 기능
- **WOW 전용 배지**: 챗봇을 통해 생성된 태스크에 `🌟 WOW` 특별 식별 배지 부여
- **실시간 알람**: 신규 태스크 접수 시 슬랙(Slack)으로 즉시 알림 전송

---

## 3. 향후 개발 대상 (Roadmap)

### 🚀 Phase 2: 진짜 '지능'의 이식 (Claude AI Integration)
- **가짜 뇌 제거**: 현재의 룰베이스(정적 답변)를 들어내고 **Claude API**를 직접 연동
- **프롬프트 엔지니어링**: 비전문적 언어를 분석하여 벙커/자비스가 바로 이해할 수 있는 JSON 데이터로 파싱하는 기술 고도화

### 🛠️ Phase 3: 에이전트 자동 처리 (Handoff & Logic)
- **자율 작업 개시**: 벙커팀이 PLANNING 완료 시 자비스팀이 자동으로 코딩을 시작하는 상태 모델링
- **김감사 QA 자동 검증**: 특정 조건 만족 시 QA 팀장이 자동으로 코드를 검토하고 시트에 'Pass/Fail' 기록

### 📊 Phase 4: 관리 생산성 강화
- **토큰 예산 대시보드**: 팀별/월별 토큰 사용량 차트 고도화 (현재 기초 데이터 반영 중)
- **히스토리 아카이브**: 각 태스크별 상세 대화 로그와 소스코드 변경 이력을 대시보드 내에서 즉시 확인하는 드릴-다운(Drill-down) 기능

---
**"꼼꼼이 팀장 박DC 보고 마칩니다. 본 문서를 기반으로 다음 채팅창 고도화 작업을 자비스팀이 수행하도록 가이드하겠습니다."** 📝✨
