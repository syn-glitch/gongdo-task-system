# [자비스_기술검토] 메모 에디터 드래그 AI 업무 추출 에러 원인 및 해결 방안

**작성자**: 자비스 (PO), Ada (Backend)
**날짜**: 2026-02-26
**대상**: `src/gas/web_app.gs` 또는 `src/gas/ai_task_parser.gs`
**수신자**: 김감사 (QA), 팀장님

---

## 🔍 시나리오 기반 에러 원인 분석 (Root Cause)

팀장님께서 제시해주신 시나리오를 바탕으로 코드 흐름을 추적한 결과, 프론트엔드 오류가 아닌 **백엔드(GAS) 서버 함수의 부재**가 근본 원인임이 밝혀졌습니다.

### 📍 사용자 시나리오 추적 결과
1. 메모 작성 후 텍스트 드래그 👉 정상 동작
2. 🐰 주디 업무등록 팝업(플로팅 버튼) 생성 👉 정상 동작
3. 버튼 클릭 시 AI 에이전트로 내용 분석 요청 👉 **여기서 에러 발생 (단절)**

### 🚨 에러 원인 상세
- 프론트엔드(`judy_workspace.html`)에서는 버튼 클릭 시 정상적으로 `google.script.run.parseTaskFromMemoWeb(...)` 함수를 호출하여 백엔드에 작업을 위임하고 있었습니다.
- 하지만 오늘 진행된 대대적인 파일 단위 재구조화 및 `web_app.gs` 통폐합 작업 중, 기존 버전에 존재하던 핵심 기능인 **`parseTaskFromMemoWeb()` (AI 로직 추출 함수)**와 **`summarizeMemoContent()` (요약 함수)**가 소스코드 파일에서 완전히 **삭제(누락)**되었습니다.
- 프론트엔드가 호출할 백엔드 목적지 함수가 소멸했기 때문에, 콜백 처리가 실패(혹은 undefined)하면서 새 업무 등록 모달창으로 데이터가 전달되지 않았던 것입니다.

---

## 🛠 해결 방안 기획

1. **백엔드 함수 복원 (Ada 작업)**
   - `src/gas/ai_task_parser.gs` 또는 `src/gas/web_app.gs` 파일에 유실된 `parseTaskFromMemoWeb` 함수를 다시 구현하여 복구합니다.
   - Claude API(모델: `claude-sonnet-4`)를 호출해 순수 JSON 데이터(`title`, `desc`, `due`)만 명확히 반환하도록 프롬프트 구조를 기존처럼 셋업합니다.

2. **프론트엔드-백엔드 데이터 브릿지 보장**
   - 백엔드에서 반환된 `{title, desc, due}` 셋업이 프론트의 `openRegModal(prefillData)`로 1:1 매핑되어 팝업에 입력 상태로 열리는지 검증합니다.

---

## ✅ 김감사(QA)님 확인 요청 (Action Item)

위 원인 분석에 따르면, **백엔드 함수 누락 복원**이 유일하고 가장 깔끔한 해결 방식입니다. 
김감사님, 이 분석 내용에 동의하신다면 승인 부탁드립니다. 승인 즉시 Ada(Backend)에게 `src/gas/` 내 AI 함수 복원 코딩을 지시하여 팀장님이 겪고 계신 불편사항을 빠르게 정상화하겠습니다!
