# 🔧 강철 AX 팀 운영 규칙

**문서 버전**: v1.0
**작성일**: 2026-02-28
**작성자**: 강철 (AX Team Lead)
**검토자**: 김감사 (QA Team Lead)

---

## 📋 목차

1. [근무 시간 및 작업 방식](#1-근무-시간-및-작업-방식)
2. [긴급 대응 프로세스](#2-긴급-대응-프로세스) ⭐ NEW
3. [코드 리뷰 규칙](#3-코드-리뷰-규칙)
4. [QA 재검수 프로세스](#4-qa-재검수-프로세스) ⭐ NEW
5. [Rollback 절차](#5-rollback-절차) ⭐ NEW
6. [문서화 규칙](#6-문서화-규칙)
7. [신규 개발 vs 리팩토링 구분 기준](#7-신규-개발-vs-리팩토링-구분-기준) ⭐ NEW

---

## 1. 근무 시간 및 작업 방식

### 기본 근무 시간
- **평일**: 09:00-18:00 (점심 시간 12:00-13:00)
- **주말**: Off (긴급 상황 제외)

### 병렬 작업 원칙
- Step 2 (병렬 분석)에서 3명이 동시 작업
- 작업 범위 명확히 구분 (함수 단위로 할당)
- Git Conflict 방지를 위해 강철 팀장이 사전 조율

---

## 2. 긴급 대응 프로세스

### 긴급 상황 정의
- **Priority 1 (Critical)**: 보안 취약점, 데이터 손실, 서비스 중단
- **예시**: API 키 노출, XSS 공격, 대량 데이터 삭제

### 긴급 연락 채널
**AI 에이전트 팀 특성상 24시간 대응 불가**

```
Step 1: 팀장님께 즉시 보고
  └─ 슬랙 DM: @팀장님
  └─ 긴급 전화: (비상 연락망)

Step 2: 강철 팀장 호출
  └─ 팀장님이 강철에게 작업 지시

Step 3: 전담 팀원 배정
  └─ Critical 보안 → 보안전문가
  └─ Critical 성능 → 성능전문가
  └─ Critical 버그 → 리팩터

Step 4: 2시간 내 1차 대응
  └─ 긴급 패치 또는 임시 차단

Step 5: 24시간 내 근본 해결
  └─ 완전한 수정 + QA 재검수
```

### 긴급 배포 권한
- **Priority 1 (Critical)**: 팀장님 승인 → 즉시 배포 → 사후 QA
- **Priority 2 (High)**: 정규 QA 후 배포

---

## 3. 코드 리뷰 규칙

### 코드 리뷰 필수 대상
- 모든 기술 부채 해결 작업
- 보안 관련 모든 변경
- 성능 최적화 (캐시 도입 등)

### 코드 리뷰 프로세스
```
Step 1: 작업 완료 후 PR 생성
  └─ 제목: [TD-001] API 키 하드코딩 제거
  └─ 설명: Before/After 코드, 테스트 결과

Step 2: 강철 팀장 리뷰
  └─ Clean Code 체크리스트 확인
  └─ 보안 체크리스트 확인 (보안 관련 작업 시)

Step 3: 리뷰 완료
  └─ ✅ 승인: QA 재검수 진행
  └─ ❌ 반려: 수정 후 재요청
```

### 코드 리뷰 체크리스트
- [ ] 함수는 한 가지 일만 수행하는가?
- [ ] 변수명이 명확한가?
- [ ] 중복 코드가 없는가?
- [ ] Magic Number가 상수화되었는가?
- [ ] 주석이 "왜(Why)"를 설명하는가?
- [ ] Cyclomatic Complexity < 10인가?

---

## 4. QA 재검수 프로세스

### QA 재검수 필수 시점
- 모든 기술 부채 해결 완료 후
- 보안 패치 적용 후
- 성능 최적화 완료 후

### QA 재검수 프로세스 (5단계)

```
Step 1: AX 팀원이 작업 완료 후 강철 팀장에게 보고
  └─ 슬랙: "[완료] TD-001 API 키 하드코딩 제거"

Step 2: 강철 팀장이 코드 리뷰 진행
  └─ 체크리스트 기반 검증
  └─ Before/After 코드 확인

Step 3: 강철 팀장이 김감사 QA팀에 공식 재검수 요청
  └─ 제목: [AX → QA] TD-001 API 키 하드코딩 제거 완료 재검수 요청
  └─ 첨부:
      - Before/After 코드
      - 테스트 스크립트
      - 예상 효과 (보안 위험도 9.0 → 1.0)

Step 4: 김감사 QA팀이 해당 영역 전문가에게 할당
  └─ TD-001 (보안) → 보안 감사관
  └─ TD-002 (성능) → UX 검증관 (로딩 속도 측정)
  └─ TD-004 (리팩토링) → 테스터 (로직 정상 작동 확인)

Step 5: QA 검증 완료 후 "Verified" 상태로 변경
  └─ 김감사 승인 → 백로그에서 "Verified" 마킹
  └─ 효과 측정 리포트 작성 (월간 리포트에 포함)
```

### QA 재검수 기준

| 영역 | 검증 방법 | 통과 기준 |
|------|----------|----------|
| **보안** | 실제 해킹 시뮬레이션 (XSS, SQL Injection) | 공격 실패 100% |
| **성능** | 벤치마크 스크립트 (Before/After 비교) | 목표 개선률 달성 (예: 30%) |
| **리팩토링** | 기능 테스트 (기존 기능 정상 작동 확인) | 에러 0건 |

---

## 5. Rollback 절차

### Rollback이 필요한 상황
- 배포 후 30분 이내 치명적 버그 발견
- 사용자 에러 리포트 5건 이상
- 데이터 정합성 이슈 발견

### Rollback 절차 (5단계)

```
배포 전 (사전 준비)
Step 1: Git 태그 생성
  └─ git tag v1.2.3-before-TD001
  └─ git push origin v1.2.3-before-TD001

배포 후 (모니터링)
Step 2: 5분간 에러 로그 확인
  └─ GAS Execution Log 모니터링
  └─ 슬랙 에러 알림 확인

이상 발견 시 (Rollback)
Step 3: GAS Editor에서 이전 버전 복원
  └─ [확장 프로그램] > [Apps Script]
  └─ [배포] > [이전 버전 복원] (v1.2.3-before-TD001)

Step 4: 슬랙 전체 공지
  └─ @channel "TD-001 배포를 긴급 롤백했습니다. 이전 버전으로 복구 완료."

Step 5: 팀장님께 사고 보고서 제출
  └─ 5 Whys 근본 원인 분석
  └─ 재발 방지 대책
```

### 사고 보고서 템플릿

```markdown
## 사고 보고서: TD-001 배포 롤백

### 사고 개요
- 발생 일시: 2026-03-01 14:30
- 발견자: 사용자 A
- 영향 범위: 전체 사용자 (100%)
- 다운타임: 15분

### 근본 원인 (5 Whys)
1. Why: API 호출 실패
2. Why: 새 API 키가 PropertiesService에 없음
3. Why: 배포 스크립트에서 누락
4. Why: 배포 체크리스트 미준수
5. Why: 체크리스트가 구두 전달 (문서 없음)

### 재발 방지 대책
- [x] 배포 체크리스트 문서화 (ax/ax_team_rules.md)
- [x] 배포 자동화 스크립트 작성
- [x] QA 재검수 필수화
```

---

## 6. 문서화 규칙

### 필수 문서화 대상
- 모든 기술 부채 해결 작업
- 보안 패치
- 성능 최적화
- 긴급 대응 사고

### 문서 저장 위치
```
ax/
├── refactoring/     # 리팩토링 작업
│   └── YYYY-MM-DD_feature_name_refactor.md
├── security/        # 보안 강화
│   └── YYYY-MM-DD_security_patch.md
├── performance/     # 성능 최적화
│   └── YYYY-MM-DD_performance_optimization.md
└── reports/         # 효과 리포트
    └── YYYY-MM_monthly_improvement_report.md
```

### Before/After 코드 필수 포함
모든 문서에 Before/After 코드 명시 (QA 검증 용이성)

---

## 7. 신규 개발 vs 리팩토링 구분 기준

### 판단 기준

| 상황 | 담당 팀 | 예시 |
|------|--------|------|
| **신규 개발** | 자비스 개발팀 | 기존 함수에 새로운 파라미터 추가 |
| **리팩토링** | 강철 AX팀 | 기존 함수를 3개로 분리 |
| **회색 지대** | 강철 ↔ 자비스 협의 | 기존 함수 수정 + 새 기능 추가 |

### 구체적 예시

#### 신규 개발 (자비스 담당)
```javascript
// Before
function createTask(title, dueDate) { ... }

// After (파라미터 추가)
function createTask(title, dueDate, priority) { ... } // ✅ 자비스가 직접 수정
```

#### 리팩토링 (AX 담당)
```javascript
// Before (150줄 복잡한 함수)
function createTask(title, dueDate, priority) {
  // 유효성 검증 (30줄)
  // 비즈니스 로직 (80줄)
  // 시트 저장 (40줄)
}

// After (함수 분리)
function createTask(title, dueDate, priority) {
  validateTaskInput(title, dueDate, priority);
  var taskData = buildTaskData(title, dueDate, priority);
  saveTaskToSheet(taskData);
}
// ✅ AX 팀이 리팩토링
```

#### 회색 지대 (협의 필요)
```javascript
// 시나리오: 기존 함수에 캐싱 추가 (성능 최적화 + 로직 변경)
// 질문: 자비스가 하나? AX가 하나?
// 답변: 강철 팀장과 자비스 PO 협의 후 결정
```

---

## 📞 연락처

**팀장**: 강철 (AX Team Lead)
**협업 요청**: 김감사 (QA Team Lead), 자비스 (PO)
**에스컬레이션**: 팀장님

---

> "명확한 규칙은 혼란을 제거하고, 효율을 극대화합니다." - 강철 AX 팀
