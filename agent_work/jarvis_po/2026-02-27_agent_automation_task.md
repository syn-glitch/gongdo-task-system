# 🤖 AI 에이전트 자동화 시스템 (하이브리드 v1.0) 구축 Task

**작성일**: 2026-02-27
**목표**: PO(자비스)와 QA(김감사) 간의 문서 핑퐁을 구글 시트와 슬랙을 통해 100% 자동화하여 팀장님의 수동 복사/붙여넣기 개입을 제거한다.

---

## 📅 Phase 1: 기반 인프라 (MVP) 구축 (1일 차)

### 1-1. 구글 시트 (Queue) 세팅
- [ ] 주디 구글 스프레드시트에 새 탭 `Agent_Tasks` 생성
- [ ] 헤더 세팅 (A~L열): `Task_ID`, `요청_내용`, `상태`, `담당_에이전트`, `개발_문서_링크`, `QA_문서_링크`, `QA_체크리스트`, `에러_카운트`, `핑퐁_횟수`, `등록_시간`, `완료_시간`, `비고`
- [ ] B열(상태) 드롭다운 데이터 유효성 검사 적용: `대기중`, `개발중`, `QA_대기`, `QA_진행중`, `디버깅_필요`, `최종_승인`

### 1-2. GAS 관제탑 스크립트 작성 (`agent_sync.gs`)
- [ ] `agent_sync.gs` 파일 신규 생성
- [ ] 자비스 상태 감지 함수 `jarvis_AutoDevelopmentTrigger()` 골조 작성
- [ ] 김감사 상태 감지 함수 `kimQA_AutoReviewTrigger()` 골조 작성
- [ ] GAS 에디터에서 두 함수 모두 1분 단위 시간 기반 트리거(Time-driven Trigger) 연동

---

## 📅 Phase 2: 에이전트 파이프라인(문서 자동 생성) 연동 (2일 차)

### 2-1. 자비스 (PO/Dev) 자동화 기능
- [ ] `대기중` 상태 감지 시 → `개발중(자비스)` 락(Lock) 걸기
- [ ] (프롬프트/API 통해) 요구사항을 바탕으로 로컬에 `.md` 또는 `.gs` 파일 생성
- [ ] 완료 시 시트 E열(개발_문서_링크) 업데이트 및 상태 `QA_대기`로 토스
- [ ] `디버깅_필요` 상태 감지 시 → F열(QA 문서)을 읽고 코드를 수정한 뒤 다시 `QA_대기`로 토스 (핑퐁 횟수 +1)

### 2-2. 김감사 (QA) 자동화 기능
- [ ] `QA_대기` 상태 감지 시 → `QA_진행중(김감사)` 락(Lock) 걸기
- [ ] (프롬프트/API 통해) E열의 개발 문서를 분석하고 V2.0 프로세스에 따라 QA 수행
- [ ] QA 보고서 파일을 로컬에 생성하고 F열(QA 문서 링크) 업데이트
- [ ] 에러 카운트 연산 후 상태 분기:
  - 에러가 있으면(H열 > 0): `디버깅_필요(자비스)` 로 리턴
  - 에러가 없으면(H열 == 0): `최종_승인(팀장님)` 으로 종료

---

## 📅 Phase 3: 슬랙 웹훅 결재 알림 (3일 차)

### 3-1. Slack 알림 연동
- [ ] 슬랙 앱에 Incoming Webhooks 추가 및 전용 채널(ex: `#agent-notifications`) URL 발급
- [ ] GAS 환경 변수(Script Properties)에 `SLACK_WEBHOOK_URL` 등록
- [ ] `agent_sync.gs` 내에 `sendSlackNotification(taskId)` 함수 구현
- [ ] 핑퐁 횟수, 총 소요 시간, 결과 파일 링크가 담긴 결재 메시지 형식(Template) 작성

### 3-2. 통합 테스트 (Integration Test)
- [ ] 팀장님이 시트에 "테스트 봇 동작 확인" 적고 `대기중` 상태 세팅
- [ ] 자비스가 문서를 만들고 `QA_대기`로 넘기는지 확인
- [ ] 김감사가 QA 문서를 만들고 `최종_승인` 처리 후 팀장님께 슬랙 알림이 오는지 1 Cycle 검증

---

## 📌 운영/유지보수 안전장치 (Phase 4)
- [ ] **무한 루프(Ping-Pong) 방지 로직**: I열(핑퐁_횟수)가 5를 초과하면 상태를 `수동_개입_필요`로 강제 변경하고 슬랙 비상 알림 전송.
- [ ] **가비지 컬렉터**: 2시간 이상 처리되지 않고 있는 `개발중` / `QA_진행중` 태스크 감지 시 초기화 경고 알림.
