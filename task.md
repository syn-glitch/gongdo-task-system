# 업무 관리 시스템 로드맵

## 1단계: 기반 구축 - 구글 스프레드시트 데이터베이스 설정 <!-- id: 1 -->
- [x] 시트 구조 정의 (업무, 프로젝트, 팀원) <!-- id: 2 -->
- [x] `Tasks` (업무) 시트 생성 (ID, 상태, 프로젝트, 내용, 담당자, 날짜 등) <!-- id: 3 -->
- [x] `Users` (팀원) 및 `Projects` (프로젝트) 참조 시트 생성 <!-- id: 4 -->
- [x] ID 생성 및 타임스탬프 관리를 위한 기본 Google Apps Script (GAS) 구현 <!-- id: 5 -->

## Git 및 문서 관리 (Phase 1.5) <!-- id: 25 -->
- [x] 프로젝트 파일 및 문서 Git 커밋 <!-- id: 26 -->
- [x] GitHub 원격 저장소 생성 및 푸시 ([링크](https://github.com/syn-glitch/gongdo-task-system)) <!-- id: 27 -->

## 2단계: 슬랙 연동 - 알림 시스템 <!-- id: 6 -->
- [x] 슬랙 앱 생성 및 권한 설정 <!-- id: 7 -->
- [x] 슬랙으로 메시지를 보내기 위한 Incoming Webhook (또는 Bot Token) 설정 <!-- id: 8 -->
- [x] 새 업무 등록 시 슬랙으로 알림을 보내는 GAS 함수 작성 <!-- id: 9 -->
   - [x] 기본 전송 코드 작성
   - [x] 실전용 자동화 코드(DB연동) 작성 및 트리거 설정
   - [x] 데이터 유효성 검사(드롭다운) 적용으로 알림 정확도 향상

## 3단계: 슬랙 연동 - 업무 등록 (양방향) <!-- id: 10 -->
- [x] GAS에서 슬랙 상호작용 페이로드 처리 (doPost 생성) <!-- id: 13 -->
- [x] GAS를 '웹 앱'으로 배포하여 URL 획득 <!-- id: 28 -->
- [x] 슬랙 앱에서 슬래시 커맨드(예: `/주디`) 생성 및 URL 연결 <!-- id: 11 -->
- [x] 상세 업무 입력을 위한 슬랙 모달(Modal) UI 구축 <!-- id: 12 -->
   - 슬랙과 GAS 연동은 추후에 처리 예정 //용남이 직접 추가한 내용


## 4단계: 캘린더 동기화 <!-- id: 14 -->
- [x] GAS에서 캘린더 API 활성화 및 `calendar_sync.gs` 스크립트 작성 <!-- id: 15 -->
- [x] 동기화 로직 구현: 시트 행 업데이트 -> 캘린더 일정 생성/수정 <!-- id: 16 -->
- [x] 일정 삭제 또는 날짜 변경 처리 (상태 변경 반영) <!-- id: 17 -->

## 5단계: AI 리포팅 및 분석 <!-- id: 18 -->
- [x] GAS에서 Claude API 연결 설정 및 `ai_report.gs` 작성 <!-- id: 19 -->
- [x] 일간/주간 완료 업무 데이터를 가져오는 스크립트 작성 <!-- id: 20 -->
- [x] AI를 통한 요약 리포트 생성 및 슬랙 전송 <!-- id: 21 -->

## 6단계: 대시보드 및 최적화 <!-- id: 22 -->
- [x] 구글 스프레드시트 내 시각적 대시보드 및 차트 세팅 가이드 작성 <!-- id: 23 -->
- [x] 매일 아침 전송되는 "모닝 브리핑" 자동화 코드 및 트리거 스위치 구현 <!-- id: 24 -->

## 7단계: 메모장 (Judy Note) UI/UX 고도화 및 AI 요약
- [x] `judy_note.html` CSS 구조 개편 (CSS Variables 도입 및 Light Mode/Dark Mode 지원)
- [x] 좌측 사이드바(폴더 구조) 및 우측 에디터 영역 2단 레이아웃 구현
- [x] `drive_archive.gs`에 아카이브 트리 파싱 백엔드 함수 (`getArchivedMemos`) 추가
- [x] 프론트엔드 연동 및 사이드바 내 폴더 목록 클릭 이벤트 구현 (읽기 모드 전환)
- [x] 메모 조회 영역 상단에 AI 요약 버튼 및 UI 오버레이 구현
- [x] `web_app.gs` 및 AI 로직 (`summarizeMemoContent`) 추가

## 8단계: 🚀 향후 고도화 계획 (Future Enhancements)
- [x] **특정 단어 및 단어 전체 검색 기능 (Global Search)**
  - 모든 마크다운 파일을 순회하여 키워드 매칭 후 사이드바나 에디터에 결과 표출 (AI RAG 통합 로직 기반)
- [x] **슬랙 기반 챗봇 라우팅 및 빠른 검색 (Slack Intent Routing)**
  - 슬랙 봇 DM 수신 시 메시지 의도 판별(기반: 키워드) 로직 추가
  - 메모 단순 저장 시 불필요한 AI 답변(`processAiChatSync`) 완전 차단
  - "오늘 작성 메모 보여줘" 검색 의도시 금일 날짜의 메모를 조회하여 슬랙으로 깔끔하게 반환
- [ ] **에디터 내용 수정 가능 모드 (Edit Mode) & 덮어쓰기 기능**
  - **설명**: 현재 읽기 전용으로 불러와지는 과거 메모를 웹 에디터 안에서 직접 수정하고 저장할 수 있는 기능입니다.
  - **개발 방향**: 드라이브 마크다운 문서 내용을 파싱하여 특정 시간대 블록만 정확히 찾아 교체하고 파일 원본을 덮어쓰는(Update) 안전한 치환 로직 구현이 핵심입니다.
- [ ] **AI 챗봇과의 양방향 인터페이스 (AI Chat & Ask)**
  - **설명**: 단순한 '전체 글 요약' 팝업을 넘어서, 본문 내용 중 특정 구역을 지정하거나 하단 채팅창을 통해 AI와 티키타카(질의응답)를 나눌 수 있는 지능형 워크스페이스 기능입니다.
  - **개발 방향**: 에디터 내 동적 질문 API(`askAi`) 신설 및 노션(Notion)의 AI 블록과 유사한 양방향 채팅 버블 UI를 프론트엔드에 추가 구축해야 합니다.

## 9단계: 사용자 전면 동적 관리 및 구글 SSO 보안 강화 (Dynamic User & Auth)
- [ ] **웹 백엔드 (`web_app.gs`) 인증 시스템 구축**
  - 접속자의 구글 이메일을 서버에서 안전하게 가져오는(`Session.getActiveUser().getEmail()`) 권한 로직 추가
  - `Users` 시트에 등록된 이메일과 대조하여 허가된 사용자인지 판별하고, 본인의 이름(Real Name)을 반환하는 함수 개발
- [ ] **웹 프론트엔드 (`judy_note.html`) 자동 로그인 UI 개편**
  - 기존의 보안상 취약했던 수동 선택형 `<select id="userSelect">` 드롭다운 UI 완전 제거
  - 렌더링 시 백엔드 인증을 거쳐 검증된 자신의 이름만 상단에 고정 표시되도록 수정 (타인 메모 열람 및 도용 작성 원천 차단)
  - 미인가 사용자 접속 시 화면을 가리는 `풀스크린 오버레이 거부 창` 표시
- [ ] **슬랙 봇 1시간 캐시 및 시트 연동 (`slack_command.gs`)**
  - `fetchUserName` 함수 내 하드코딩 딕셔너리 완전 제거
  - 타임아웃 방지를 위해 `CacheService`를 활용하여 `Users` 시트 데이터를 1시간 단위 캐싱 후 맵핑하는 동적 구조 도입
