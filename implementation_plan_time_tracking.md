# ⏱️ Phase 21: 맥락 인지 스마트 리마인더 & 업무 트래킹 시스템

## 📋 개요
사용자가 업무의 상태를 변경할 때(대기 → 진행중 → 완료) 실제 소요된 시간을 자동으로 기록하고, 이를 시각화하여 업무 몰입도를 파악할 수 있는 시스템을 구축합니다.

---

## 🏗️ 1. 데이터베이스 구조 변경 (`Tasks` 시트)

기존 14~15개 컬럼 뒤에 트래킹을 위한 컬럼 3개를 추가합니다.
- **P열: 시작 시간 (`StartTime`)** - '진행중'으로 변경된 시점의 타임스탬프
- **Q열: 종료 시간 (`EndTime`)** - '완료'로 변경된 시점의 타임스탬프
- **R열: 소요 시간(분) (`DurationMin`)** - (종료 - 시작)을 계산한 분 단위 값

---

## 🛠️ 2. 백엔드 로직 (GAS: `web_app.gs`)

### `changeTaskStatusFromWeb(rowNum, newStatus)` 고도화
1. **[진행중]으로 변경 시**:
   - `P열(StartTime)`에 현재 시간(`new Date()`)을 기록합니다.
   - 이미 기록된 시작 시간이 있다면 유지하거나 덮어쓸지 결정 (기본적으로 덮어쓰기).
2. **[완료]로 변경 시**:
   - `Q열(EndTime)`에 현재 시간 기록.
   - `P열(StartTime)` 값을 가져와 차이를 계산하여 `R열(DurationMin)`에 기록.

---

## 🌐 3. 프론트엔드 UI/UX (`judy_workspace.html`) - **관리자 모드 제한**

### 관리자 권한 설정
- **대상**: 송용남, 정혜림
- **제한 방식**: 프론트엔드 렌더링 시 현재 사용자가 위 2명인 경우에만 트래킹 UI를 노출 (다른 팀원에게는 노출되지 않음)

### 대시보드 리스트 강화 (관리자 전용)
- 각 업무 행에 소요 시간 표시 (예: `⏱️ 1시간 20분`)
- 상태가 '진행중'인 경우, 현재 실시간으로 흐르는 시간 표시 (Optional, 우선순위 낮음)

### 상단 요약 카드 (Dashboard Summary - 관리자 전용)
- **"오늘의 몰입 시간"** 카드 신설
- 오늘 날짜에 기록된 `DurationMin`의 총합을 계산하여 시각화 (예: `🔥 오늘 총 5시간 30분 집중하셨습니다!`)

---

## 🧪 4. 시나리오 테스트 (이메일 자동화 개발)
1. 사용자가 **"Email 자동화 기능 개발"** 업무 등록
2. 개발 시작 전 상태를 **[진행중]**으로 변경 ➡️ 백엔드 시작 시간 기록
3. 개발 완료 후 **[완료]**로 변경 ➡️ 백엔드 종료 시간 기록 및 분 단위 계산
4. 대시보드 새로고침 없이(또는 후) **"소요 시간"** 뱃지 및 **"오늘의 몰입 시간"** 합산 확인

---

## 🔮 5. 다음 단계 확장 (Phase 22 예정)
- **AI 지식 회고 노트**: 업무 완료 시 자동으로 나타나는 회고 팝업 및 지식 베이스(DB) 연동
- **주간/월간 통계**: 어떤 프로젝트에 가장 많은 시간을 썼는지 파이 차트 제공
