# 🤖 Judy AI Agent: 공도 업무 관리 지능형 비서

## 📋 문서 개요
본 문서는 공도 업무 관리 시스템의 1호 AI 에이전트인 **주디(Judy)**의 현재 개발 현황, 채널(슬랙 vs 웹 워크스페이스)별 역할 분리 전략, 그리고 향후 아키텍처 개선 방향을 정리한 문서입니다.
- **작성 목적**: 내부 개발자 간의 시스템 이해도 제고 및 향후 서버 고도화(Scale-up) 시점의 마일스톤 및 논의 기준으로 활용

---

## 🏗 현재 개발 환경 및 아키텍처 (GAS 기반)

### 시스템 구성
- **백엔드/인프라**: Google Apps Script (GAS) 서버리스 환경
- **데이터베이스**: Google Sheets (업무/사용자 DB 마스터)
- **저장소**: Google Drive (마크다운 메모/아카이브 저장)
- **AI 엔진**: Claude 3 (Claude-Sonnet-4-20250514) API
- **프론트엔드 채널**: Slack (명령어 및 즉각 알림), Web (SPA 형태의 Judy Workspace)

### 현재 GAS 개발 환경의 장/단점 및 개선 방향

#### ✅ 장점 (현재 단계의 강점)
1. **운영 비용 제로(Zero)**: 구글 인프라 내에서 동작하므로 별도의 호스팅 및 서버 유지비가 발생하지 않습니다.
2. **쉬운 데이터 접근성**: 기획자나 운영자도 직접 구글 시트를 통해 DB를 열람하고 수정할 수 있는 직관적인 환경을 제공합니다.
3. **신속한 프로토타이핑**: 복잡한 서버 구축 없이 스크립트 작성만으로 슬랙 봇과 웹앱을 동시에 빠르게 배포할 수 있습니다.

#### ⛔ 단점 및 한계점
1. **슬랙 3초 타임아웃 룰**: 슬랙 API는 무조건 3초 내에 `HTTP 200 OK` 응답을 요구하나, GAS는 비동기(Async) 백그라운드 처리가 불가능한 동기(Sync) 방식이라 무거운 AI 연산(예: 컨텍스트 파싱) 시 무조건 에러가 발생합니다.
2. **성능 및 확장성 제약**: 데이터베이스 대신 구글 시트를 사용하므로, 데이터가 1,000건 이상 누적되거나 동시 접속자가 늘어날 경우 읽기/쓰기 병목 현상과 심각한 레이턴시 지연이 발생합니다.

#### 💡 향후 개선 방향 (서버 고도화)
- **1단계 (임시 방편)**: Cloudflare Workers 등 무료 엣지(Edge) 서버를 미들웨어로 두어 슬랙의 3초 룰 응답만 대신 처리해주고, 실제 연산은 GAS 트리거에 던지는 방안.
- **2단계 (완전 독립)**: Node.js (Express/NestJS) 기반 백엔드 및 PostgreSQL(또는 Firebase)을 도입하여 비동기 처리의 근본적 해결과 AI 에이전트의 완전 능동화 구현 (업무량 매일 500건 초과 시점 권장).

---

## 🧠 AI 기능 현황 및 로드맵

### ✅ 현재 개발 완료된 AI 기능 (Current Capabilities)
현재 주디는 텍스트를 구조화하고 요약하는 **'수동적 보조(Passive Assistance)'** 기능에 개발이 집중되어 있습니다.

1. **✨ AI 업무 내용 추출 (Workspace)**
   - **기능**: 사용자가 에디터에서 자유 형식의 회의록이나 긴 문장(텍스트)을 드래그하면 화면 상단에 � 플로팅 버튼이 노출됩니다.
   - **작동**: 버튼 클릭 시 Claude API가 문단을 분석하여 실행 가능한 업무 요건(Action Items)을 추출하고, **제목 / 마감일 / 상세 내용**으로 스플릿하여 모달 입력폼을 자동으로 채워줍니다.
2. **✨ 문서 스마트 핵심 요약 (Workspace)**
   - **기능**: 과거에 작성된 긴 회의록이나 메모(마크다운 파일)를 뷰어에서 불러올 때 상단의 '✨ 요약' 버튼을 제공합니다.
   - **작동**: 방대한 맥락을 파악하여 3~5줄로 핵심 요약된 팝업을 제공하여 리딩 시간을 단축합니다.
3. **📊 AI 일간/주간 리포팅 자동화 (Slack)**
   - **기능**: 공용 업무 데이터베이스(`Tasks` 시트)를 스캔하여 완료된 업무와 지연된 업무를 분석합니다.
   - **작동**: 매일 아침(모닝 브리핑) 또는 주간 단위로 팀의 진척도와 성과를 요약하여 슬랙 채널에 푸시(Push) 메시지로 자동 전송합니다.
4. **🔍 시맨틱 키워드 1차 검색 (Workspace)**
   - **기능**: 드라이브에 저장된 전체 마크다운 파일들의 내용 중 특정 단어나 의도를 매칭시켜 사이드바에서 검색 결과를 표출합니다.

### 🚀 향후 추가/확장 예정인 AI 기능 (Future Capabilities)
향후 아키텍처 개선(서버 고도화 등)과 맞물려, 주디를 단순히 묻는 말에 대답하는 봇에서 **'먼저 행동하고 대화하는 동료(Proactive Agent)'**로 진화시키는 단계입니다.

1. **🗣️ 자연어 슬랙 업무 등록 (의도 파악)**
   - **목표**: 슬랙 형태의 깐깐한 모달 폼 작성 없이, 슬랙 DM에 *"넷마블 기획서 금요일까지"* 라고만 치면 AI가 의도(Intent)를 파싱합니다.
   - **결과**: "📋 업무를 등록할까요? (등록/수정 버튼)" 형태로 사용자에게 등록 제안(Confirm) 플로우를 구축합니다.
2. **⏰ 맥락 인지 스마트 넛지 (Nudge)**
   - **목표**: 기계적인 일별 리포트를 넘어, 마감 1일 전이거나 3일 이상 '대기' 상태에 머물러 있는 태스크를 AI 스스로 감지합니다.
   - **결과**: 슬랙 개인 DM으로 담당자에게 거부감 없는 어조로 업무 진행 여부(블로커 확인)를 묻고 알림을 보냅니다.
3. **💬 대화형 상태 관리 및 질의응답 (Interactive Chat)**
   - **워크스페이스 확장**: 에디터 내에서 노션(Notion) AI처럼 빈 줄에 슬래시(`/`)를 입력하여 *'현재 글에 어울리는 소제목 작성해 줘'* 등의 양방향 프롬프팅 블록을 도입합니다.
   - **슬랙 확장**: 슬랙 DM에서 *"방금 넷마블 기획서 끝났어"* 라고 치면 주디가 스스로 DB 상태를 '완료'로 갱신하고 남은 오늘의 잔여 업무를 브리핑합니다.
4. **📸 비용 증빙 영수증 OCR 파싱 통합**
   - **목표**: 카드 결제 문자 결제나 영수증 이미지를 던지면 AI 비전(Vision) 또는 정규식으로 금액, 결제처를 파싱하여 재무 DB에 자동 기입합니다.

---

## �🚦 채널별 AI 사용 전략과 역할 분리 (현재 기준)

현재 GAS 환경의 태생적 한계(3초룰 및 동기 지연)로 인해 AI 연산 과정에서 지속적인 충돌이 발생합니다. 이를 회피하고 최적의 UX를 제공하기 위해 **슬랙봇 영역과 웹 워크스페이스 영역의 역할을 철저히 이원화**합니다.

### 1. 💬 주디 슬랙봇 (Slack Bot) 영역
**[목표]: "가벼운 접수 창구 및 확성기 (Quick Input & Push Notification)"**

무거운 AI 분석(요약, 파싱)을 슬랙에서 완전히 배제하여 타임아웃 오류를 방지합니다.

- **현재 사용 방법**:
  - `/주디` 명령어: 정형화된 데이터 입력을 위한 모달(팝업)을 띄워 시트에 즉시 등록(AI 연산 없음).
  - 메시지 메뉴 (점 3개): 대화를 그대로 긁어와서 태스크 폼에 채워주는 역할.
  - 매직 링크 발급 (`/주디 내업무`, `/주디 노트`): 웹으로 넘어가기 위한 1회용 로그인 링크 셔틀.
- **향후 개발 방향**:
  - 서버 고도화 이전까지는 타임아웃을 유발하는 AI 자유 대화(DM 질의응답) 기능을 의도적으로 제한하거나, 사용자에게 웹 워크스페이스로 이동하도록 가이드하는 봇 로직을 유지합니다.
  - 매일 아침 리포트(모닝 브리핑), 타인 지정 시 담당자 알림 등 일방향 **푸시(Push)** 기능 고도화에 시스템 역량을 집중합니다.

### 2. 🌐 주디 워크스페이스 (Web Workspace) 영역
**[목표]: "AI 연산 및 심층 관리 공간 (Deep Processing & Management)"**

웹 환경은 3초 타임아웃 룰의 제약을 받지 않으므로(서버 응답 최장 6분 대기 가능), Claude AI의 무거운 연산 로직을 이곳에 몰아줍니다.

- **현재 사용 방법**:
  - **✨ AI 핵심 업무 내용 추출**: 노트 에디터에서 긴 회의록의 일부분을 드래그하면 화면 상단에 🐰 플로팅 버튼이 노출됩니다. 누르면 넉넉히 5~10초 동안 AI가 문단을 파싱하여 모달 입력폼에 내용(제목/마감일/상세)을 예쁘게 스플릿하여 채워줍니다.
  - **✨ 과거 내용 스마트 요약**: 긴 아카이브 문서를 불어왔을 때 상단의 팝업 버튼을 눌러 핵심 맥락을 요약받습니다.
  - **📊 통합 대시보드 상태 관리**: 상태(진행/대기)를 드롭다운으로 즉시 변경하고 현황을 넓게 봅니다.
- **향후 개발 방향**:
  - 현재 단방향 요약/추출에 그치는 AI 액션을, 텍스트 에디터 안쪽에서 "AI에게 질문하기" 혹은 특정 영역을 지정하고 "여기에 어울리는 기획안 목차 작성해 줘" 등 **양방향 프롬프팅 툴**로 진화시킬 계획입니다.

---

## 🎯 요약 및 결론 
현재의 이원화 채널 전략은 인프라 한계 타개와 사용자 경험(UX) 최적화라는 두 마리 토끼를 잡기 위한 최선의 과도기적 아키텍처입니다.
- **명확한 규율**: *"슬랙에서는 가볍게 확인하고 넘기고, 무거운 일은 무조건 딥 다이브(웹)에서 한다."*
- 개발 논의 시, 새로운 기능(예: 자연어 대화형 등록)이 요구될 때 이 기능이 가벼운 알림 수신형(Slack)에 적합한지, 무거운 연산형(Web)에 적합한지 판단하는 기준 문서를 삼고자 합니다.
